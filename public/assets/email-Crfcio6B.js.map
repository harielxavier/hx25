{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDa,kBAAY,CAAO,YAA4C;AACtE;AAGF,UAAM,EAAE,UAAc,UAAM;AAAA,yBAAAA,eAAA,aAAO,qBAAuB;AAAA,0BAAAA,WAAA;AAAA;AAC1D,UAAM,EAAE,eAAAC,eAAkB;sDAAM,QAA2B;AAAA,8BAAAA,eAAA;AAAA;AAErD,wBAAcA,eAAc,WAAW,WAAW;AAGxD,UAAM,UAAU;AAAA,MACd,IAAI,QAAQ;AAAA,MACZ,SAAS,QAAQ;AAAA,MACjB,MAAM,QAAQ;AAAA,MACd,MAAM,QAAQ;AAAA;AAAA,MACd,SAAS,QAAQ;AAAA,MACjB,IAAI,QAAQ;AAAA,MACZ,KAAK,QAAQ;AAAA,MACb,aAAa,QAAQ;AAAA,IACvB;AAEA,UAAM,YAAY,OAAO;AACjB,gBAAI,sDAAsD,OAAO;AAClE;AAuBA;AAAA,WACA,OAAO;AACN,kBAAM,uCAAuC,KAAK;AACnD;AAAA;AAEX;AAKa,qBAAe,CAAO,aAAyC;AACtE;AACM,gBAAI,4BAA4B,QAAQ;AAGhD,UAAM,UAAU;AAAA,MACd,WAAW,SAAS;AAAA,MACpB,UAAU,SAAS;AAAA,MACnB,OAAO,SAAS;AAAA,MAChB,OAAO,SAAS,SAAS;AAAA,MACzB,WAAW,SAAS,aAAa;AAAA,MACjC,WAAW,SAAS,aAAa;AAAA,MACjC,eAAe,SAAS,iBAAiB;AAAA,MACzC,YAAY,SAAS,cAAc;AAAA,MACnC,gBAAgB,SAAS,kBAAkB,CAAC;AAAA,MAC5C,eAAe,SAAS,iBAAiB;AAAA,MACzC,kBAAkB,SAAS,oBAAoB;AAAA,MAC/C,QAAQ,SAAS,UAAU;AAAA,MAC3B,aAAa,SAAS,eAAe;AAAA,MACrC,gBAAgB,SAAS,WAAW,SAAS,kBAAkB;AAAA,MAC/D,QAAQ,SAAS,UAAU;AAAA,IAC7B;AAII;AACF,YAAM,EAAE,kBAAsB;AAAA,mCAAAC,uBAAA,MAAM,OAAO,2BAA4B;AAAA,oCAAAA,mBAAA;AAAA;AACjE,qBAAS,MAAM,kBAAkB,OAAO;AACtC,kBAAI,sCAAsC,MAAM;AAAA,aACjD,OAAO;AACN,oBAAM,qCAAqC,KAAK;AAAA;AAInD;AAAA,WACA,OAAO;AACN,kBAAM,mCAAmC,KAAK;AAC/C;AAAA;AAEX;AAKO,MAAM,wBAAwB,MAA8B;AAC7D;AAGF,YAAQ,MAAM,qEAAqE;AAa5E;AAAA,WACA,OAAO;AACN,kBAAM,mDAAmD,KAAK;AAC/D;AAAA;AAEX;AAEA,MAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AACF","names":["functions","httpsCallable","submitContactForm"],"ignoreList":[],"sources":["../../src/lib/api/email.ts"],"sourcesContent":["/**\n * Email sending utility for the application\n * Email sending utility for the application\n * NOTE: Direct Nodemailer usage has been removed as it's incompatible with frontend code.\n * Email sending must be handled via a backend service (e.g., Firebase Cloud Functions).\n */\n\n// Nodemailer import removed - cannot be used in frontend\n// import nodemailer from 'nodemailer';\n\ninterface EmailOptions {\n  to: string | string[];\n  subject: string;\n  html: string;\n  from?: string;\n  replyTo?: string;\n  cc?: string | string[];\n  bcc?: string | string[];\n  attachments?: Array<{\n    filename: string;\n    content: string | Buffer;\n    contentType?: string;\n  }>;\n}\n\ninterface LeadData {\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone?: string;\n  message?: string;\n  source?: string;\n  eventType?: string;\n  eventDate?: string;\n  eventLocation?: string;\n  guestCount?: string;\n  preferredStyle?: string[];\n  mustHaveShots?: string;\n  inspirationLinks?: string;\n  budget?: string;\n  hearAboutUs?: string;\n  additionalInfo?: string;\n  [key: string]: any; // Allow additional fields\n}\n\n/**\n * Send email using Nodemailer directly\n */\nexport const sendEmail = async (options: EmailOptions): Promise<boolean> => {\n  try {\n    // Call the generic Firebase Cloud Function 'sendEmail'\n    // Dynamically import necessary Firebase modules\n    const { functions } = await import('../../firebase/config'); // Adjust path if needed\n    const { httpsCallable } = await import('firebase/functions');\n    \n    const sendEmailFn = httpsCallable(functions, 'sendEmail'); \n    \n    // Prepare data payload for the backend function\n    const payload = {\n      to: options.to,\n      subject: options.subject,\n      html: options.html,\n      from: options.from, // Pass optional fields if they exist\n      replyTo: options.replyTo,\n      cc: options.cc,\n      bcc: options.bcc,\n      attachments: options.attachments\n    };\n\n    await sendEmailFn(payload); \n    console.log('Email request sent via generic sendEmail function:', payload);\n    return true; // Assume success if the function call doesn't throw\n   \n    // Original Nodemailer code removed:\n    /*\n    // Create a transporter with SMTP config\n    const transporter = nodemailer.createTransport({ ... });\n    // Prepare email options\n    const mailOptions = {\n      from: options.from || 'Hariel Xavier Photography <forms@harielxavier.com>',\n      to: Array.isArray(options.to) ? options.to.join(',') : options.to,\n      subject: options.subject,\n      html: options.html,\n      replyTo: options.replyTo || 'hi@harielxavier.com',\n      ...(options.cc && { cc: Array.isArray(options.cc) ? options.cc.join(',') : options.cc }),\n      ...(options.bcc && { bcc: Array.isArray(options.bcc) ? options.bcc.join(',') : options.bcc }),\n      ...(options.attachments && { attachments: options.attachments })\n    };\n    // Send the email\n    const info = await transporter.sendMail(mailOptions);\n    console.log('Email sent successfully:', info.messageId);\n    */\n    \n    // Return false for now as the email wasn't actually sent from here\n    return false; \n  } catch (error) {\n    console.error('Error in sendEmail stub (frontend):', error);\n    return false;\n  }\n};\n\n/**\n * Register a lead in the CRM system\n */\nexport const registerLead = async (leadData: LeadData): Promise<boolean> => {\n  try {\n    console.log('Registering lead in CRM:', leadData);\n    \n    // Prepare data for our CRM system (Firestore)\n    const crmData = {\n      firstName: leadData.firstName,\n      lastName: leadData.lastName,\n      email: leadData.email,\n      phone: leadData.phone || '',\n      eventType: leadData.eventType || '',\n      eventDate: leadData.eventDate || '',\n      eventLocation: leadData.eventLocation || '',\n      guestCount: leadData.guestCount || '',\n      preferredStyle: leadData.preferredStyle || [],\n      mustHaveShots: leadData.mustHaveShots || '',\n      inspirationLinks: leadData.inspirationLinks || '',\n      budget: leadData.budget || '',\n      hearAboutUs: leadData.hearAboutUs || '',\n      additionalInfo: leadData.message || leadData.additionalInfo || '',\n      source: leadData.source || 'Website Contact Form'\n    };\n    \n    // Import and use the leadService to create a lead in Firestore\n    // This is imported dynamically to avoid circular dependencies\n    try {\n      const { submitContactForm } = await import('../../services/leadService');\n      const leadId = await submitContactForm(crmData);\n      console.log('Lead created in Firestore with ID:', leadId);\n    } catch (error) {\n      console.error('Error creating lead in Firestore:', error);\n      // Continue execution even if Firestore fails - we still want to return success for the email\n    }\n    \n    return true;\n  } catch (error) {\n    console.error('Failed to register lead in CRM:', error);\n    return false;\n  }\n};\n\n/**\n * Verify email connection by testing SMTP connection\n */\nexport const verifyEmailConnection = async (): Promise<boolean> => {\n  try {\n    // TODO: This function cannot run in the browser. \n    // Connection verification should happen server-side if needed.\n    console.error('SMTP connection verification cannot be performed from the frontend.');\n    \n    // Original Nodemailer code removed:\n    /*\n    // Create a transporter with SMTP config\n    const transporter = nodemailer.createTransport({ ... });\n    // Verify the connection\n    await transporter.verify();\n    console.log('SMTP connection verified successfully');\n    return true;\n    */\n   \n    // Return false as verification cannot be done here\n    return false;\n  } catch (error) {\n    console.error('Error in verifyEmailConnection stub (frontend):', error);\n    return false;\n  }\n};\n\nexport default {\n  sendEmail,\n  registerLead,\n  verifyEmailConnection\n};\n"],"file":"assets/email-Crfcio6B.js"}