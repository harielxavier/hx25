<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hariel Xavier Photography</title>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SB0Q9ER7KW"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-SB0Q9ER7KW');
    </script>
    
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
          'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
          sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background-color: #000;
        color: #fff;
      }
      
      .loading-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #000;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }
      
      .loading-spinner {
        width: 50px;
        height: 50px;
        border: 3px solid #333;
        border-top: 3px solid #fff;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      #root:not(:empty) + .loading-container {
        display: none;
      }
    </style>
    
    <!-- COMPLETE BLOCKING OF ALL NON-SUPABASE SERVICES -->
    <script>
        console.log('ðŸ›¡ï¸ Blocking ALL non-Supabase services...');
        
        // Block Firebase completely
        window.firebase = {
            initializeApp: () => ({ auth: () => window.auth, firestore: () => ({}), analytics: () => ({}) }),
            auth: () => window.auth,
            firestore: () => ({}),
            analytics: () => ({}),
            storage: () => ({}),
            functions: () => ({})
        };
        
        // Block Clerk completely
        window.Clerk = null;
        Object.defineProperty(window, 'Clerk', {
            get: () => null,
            set: () => {}
        });
        
        // Block Google services
        window.gtag = () => {};
        window.dataLayer = [];
        window.google = null;
        window.gapi = null;
        window.GoogleAuthProvider = null;
        
        // Block all script loading
        const originalCreateElement = document.createElement;
        document.createElement = function(tagName) {
            const element = originalCreateElement.call(this, tagName);
            if (tagName.toLowerCase() === 'script') {
                Object.defineProperty(element, 'src', {
                    set: function(value) {
                        if (value && typeof value === 'string' && 
                            (value.includes('firebase') || value.includes('clerk') || 
                             value.includes('google') || value.includes('gstatic'))) {
                            return;
                        }
                        element._src = value;
                    },
                    get: function() { return element._src; }
                });
            }
            return element;
        };
        
        // Block all network requests
        const originalFetch = window.fetch;
        window.fetch = function(url, options) {
            if (typeof url === 'string' && 
                (url.includes('firebase') || url.includes('clerk') || 
                 url.includes('google') || url.includes('gstatic'))) {
                return Promise.resolve(new Response('{}', { status: 200 }));
            }
            return originalFetch.call(this, url, options);
        };
        
        // Block XMLHttpRequest
        const originalXHROpen = XMLHttpRequest.prototype.open;
        XMLHttpRequest.prototype.open = function(method, url) {
            if (typeof url === 'string' && 
                (url.includes('firebase') || url.includes('clerk') || 
                 url.includes('google') || url.includes('gstatic'))) {
                this._blocked = true;
                return;
            }
            return originalXHROpen.call(this, method, url);
        };
        
        const originalXHRSend = XMLHttpRequest.prototype.send;
        XMLHttpRequest.prototype.send = function(data) {
            if (this._blocked) return;
            return originalXHRSend.call(this, data);
        };
        
        // Block module imports
        const originalImport = window.import;
        if (originalImport) {
            window.import = function(module) {
                if (module.includes('firebase') || module.includes('clerk') || module.includes('@google')) {
                    return Promise.resolve({});
                }
                return originalImport.call(this, module);
            };
        }
        
        console.log('âœ… All non-Supabase services blocked');
    </script>
    
    <!-- Native Supabase Integration -->
    <script type="module">
        // Load Supabase SDK first
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm';

        // Initialize Supabase
        const supabase = createClient(
            'https://egoyqdbolmjfngjzllwl.supabase.co',
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVnb3lxZGJvbG1qZm5nanpsbHdsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ3MjAyNDgsImV4cCI6MjA3MDI5NjI0OH0.O4Q5-rQbUa2_vGYLjMw7UBpODonjJvgBsrfHlHJhFGk'
        );

        // Create Firebase-compatible auth object
        window.auth = {
            currentUser: null,
            
            async signInWithPopup(provider) {
                console.log('ðŸ” Supabase Google sign-in initiated');
                const { data, error } = await supabase.auth.signInWithOAuth({
                    provider: 'google',
                    options: {
                        redirectTo: window.location.href
                    }
                });
                if (error) throw error;
                return { user: data.user };
            },
            
            async signInWithEmailAndPassword(email, password) {
                console.log('ðŸ” Supabase email sign-in');
                const { data, error } = await supabase.auth.signInWithPassword({
                    email,
                    password
                });
                if (error) throw error;
                window.auth.currentUser = data.user;
                return { user: data.user };
            },
            
            async createUserWithEmailAndPassword(email, password) {
                console.log('ðŸ” Supabase user creation');
                const { data, error } = await supabase.auth.signUp({
                    email,
                    password
                });
                if (error) throw error;
                window.auth.currentUser = data.user;
                return { user: data.user };
            },
            
            async signOut() {
                console.log('ðŸ” Supabase sign-out');
                const { error } = await supabase.auth.signOut();
                if (error) throw error;
                window.auth.currentUser = null;
            },
            
            onAuthStateChanged(callback) {
                console.log('ðŸ” Supabase auth state listener set');
                supabase.auth.onAuthStateChange((event, session) => {
                    window.auth.currentUser = session?.user || null;
                    callback(window.auth.currentUser);
                });
            }
        };

        // Create GoogleAuthProvider for compatibility
        window.GoogleAuthProvider = class {
            constructor() {
                this.providerId = 'google.com';
            }
        };

        // Create minimal Firebase object for compatibility
        window.firebase = {
            initializeApp: (config) => {
                console.log('âœ… Firebase compatibility layer - using Supabase');
                return {
                    auth: () => window.auth,
                    firestore: () => ({
                        collection: () => ({
                            doc: () => ({
                                get: async () => ({ exists: false, data: () => null }),
                                set: async () => {},
                                update: async () => {},
                                delete: async () => {}
                            })
                        })
                    }),
                    analytics: () => ({ logEvent: () => {} })
                };
            }
        };

        console.log('âœ… Native Supabase integration complete');
    </script>
</head>
<body>
    <div id="root"></div>
    <div class="loading-container">
        <div class="loading-spinner"></div>
    </div>
    
    <!-- Main Application Bundle -->
    <script src="./assets/index-B-15RnBU.js"></script>
</body>
</html>

