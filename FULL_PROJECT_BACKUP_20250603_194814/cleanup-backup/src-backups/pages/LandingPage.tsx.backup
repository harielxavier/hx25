import { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { ArrowRight, Check } from 'lucide-react';
import { useInView } from 'react-intersection-observer';
import Navigation from '../components/landing/Navigation';
import Footer from '../components/layout/Footer';
import SEO from '../components/SEO';
import HeroPage from '../../MoStuff/LandingPage/HeroPage.jpg';
import Portrait from '../../MoStuff/portrait.jpg';
import PortfolioShowcase from '../components/landing/PortfolioShowcase';

export default function LandingPage() {
  const [showBookingModal, setShowBookingModal] = useState(false);
  const [scrollProgress, setScrollProgress] = useState(0);

  // Multiple sections with individual animations
  const [heroRef, heroInView] = useInView({ threshold: 0.1, triggerOnce: true });
  const [statsRef, statsInView] = useInView({ threshold: 0.1, triggerOnce: true });
  const [workRef, workInView] = useInView({ threshold: 0.1, triggerOnce: true });
  const [processRef, processInView] = useInView({ threshold: 0.1, triggerOnce: true });

  // Custom hook for count-up animation
  const useCountUp = (end: number, duration: number = 2000) => {
    const [count, setCount] = useState(0);

    useEffect(() => {
      let start = 0;
      const increment = end / (duration / 16); // 60fps

      const timer = setInterval(() => {
        start += increment;
        if (start >= end) {
          setCount(end);
          clearInterval(timer);
        } else {
          setCount(Math.ceil(start));
        }
      }, 16);

      return () => clearInterval(timer);
    }, [end, duration]);

    return count;
  };

  // Track scroll progress
  useEffect(() => {
    const handleScroll = () => {
      const totalScroll = document.documentElement.scrollHeight - window.innerHeight;
      const currentProgress = (window.scrollY / totalScroll) * 100;
      setScrollProgress(currentProgress);
    };

    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  return (
    <>
      <SEO 
        title="Hariel Xavier Photography | Wedding Photographer in Sparta, NJ"
        description="Professional wedding photography in Sparta, NJ and surrounding areas, creating lasting memories of your special day."
      />

      {/* Progress Bar */}
      <div className="fixed top-0 left-0 w-full h-1 bg-gray-200 z-50">
        <div 
          className="h-full bg-black transition-all duration-150"
          style={{ width: `${scrollProgress}%` }}
        />
      </div>

      <Navigation />
      
      {/* Hero Section */}
      <section ref={heroRef} className="relative min-h-screen flex items-center justify-center overflow-hidden pt-20" style={{ backgroundImage: `url(${HeroPage})`, backgroundSize: 'cover', backgroundPosition: 'center', height: '100vh' }}>
        <div className="absolute inset-0 bg-black bg-opacity-50" />
        <div className={`relative text-center text-white px-4 transform transition-all duration-1000 ${
          heroInView ? 'translate-y-0 opacity-100' : 'translate-y-10 opacity-0'
        }`}>
          <p className="text-sm uppercase tracking-[0.3em] mb-6">Wedding Photography</p>
          <h1 className="text-6xl md:text-7xl lg:text-8xl font-light mb-8">
            Capturing Timeless
            <br />
            <span className="font-serif">Love Stories</span>
          </h1>
          <p className="text-xl text-white/90 mb-12 max-w-2xl mx-auto">
            Professional wedding photography in Sparta, NJ and surrounding areas, creating lasting memories of your special day.
          </p>
          <div className="flex flex-col md:flex-row items-center justify-center gap-6">
            <button 
              onClick={() => setShowBookingModal(true)}
              className="w-full md:w-auto bg-white text-black px-12 py-4 hover:bg-black hover:text-white transition-all duration-300 group"
            >
              Check Availability
              <ArrowRight className="inline-block ml-2 w-4 h-4 transform group-hover:translate-x-1 transition-transform" />
            </button>
            <Link 
              to="/work"
              className="w-full md:w-auto border-2 border-white text-white px-12 py-4 hover:bg-white hover:text-black transition-all duration-300"
            >
              View Portfolio
            </Link>
          </div>
        </div>

        {/* Scroll Indicator */}
        <div className="absolute bottom-10 left-1/2 transform -translate-x-1/2 text-white">
          <div className="animate-bounce">
            <div className="w-[1px] h-16 bg-white mx-auto mb-4" />
            <p className="uppercase tracking-[0.2em] text-xs">Scroll Down</p>
          </div>
        </div>
      </section>

      {/* Stats Section */}
      <section 
        ref={statsRef}
        className="py-20 bg-black text-white"
      >
        <div className="container mx-auto px-4">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-16 transform transition-all duration-1000 ${
            statsInView ? 'translate-y-0 opacity-100' : 'translate-y-10 opacity-0'
          }">
            <div className="text-center">
              <p className="text-6xl font-serif mb-4">{useCountUp(14)}</p>
              <p className="text-sm uppercase tracking-[0.2em]">Years Shooting</p>
            </div>
            <div className="text-center">
              <p className="text-6xl font-serif mb-4">{useCountUp(300)}+</p>
              <p className="text-sm uppercase tracking-[0.2em]">Weddings Captured</p>
            </div>
            <div className="text-center">
              <p className="text-6xl font-serif mb-4">{useCountUp(5)}.0</p>
              <p className="text-sm uppercase tracking-[0.2em]">Star Rating</p>
            </div>
          </div>
        </div>
      </section>

      {/* About Section */}
      <section className="py-20">
        <div className="container mx-auto px-4">
          <div className="grid md:grid-cols-2 gap-16 items-center">
            <div>
              <img
                src={Portrait}
                alt="Mauricio Fernandez"
                className="w-full aspect-[3/4] object-cover"
                data-component-name="LandingPage"
              />
            </div>
            <div>
              <h2 className="font-serif text-4xl mb-6" data-component-name="LandingPage">Meet Your Photographer</h2>
              <p className="text-lg mb-4">Capturing Love Stories Since 2010</p>
              <p className="text-lg mb-8">Hello! I'm Mauricio Fernandez, a passionate wedding photographer based in the heart of New York. With over a decade of experience, I've had the privilege of documenting hundreds of beautiful love stories. My approach combines photojournalistic storytelling with fine art portraiture, ensuring every precious moment of your special day is captured with authenticity and elegance.</p>
              <p className="text-lg mb-8">I believe that every wedding is unique, and I work closely with each couple to understand their vision and create timeless photographs that will be cherished for generations to come. My style is characterized by natural light, genuine emotions, and thoughtful composition.</p>

            </div>
          </div>
        </div>
      </section>

      {/* Featured Work */}
      <section ref={workRef} className="py-20 bg-gray-50">
        <PortfolioShowcase />
      </section>

      {/* Wedding Photography Highlight */}
      <section className="py-20 bg-white">
        <div className="container mx-auto px-4">
          <div className="grid md:grid-cols-2 gap-16 items-center">
            <div className="order-2 md:order-1">
              <h2 className="font-serif text-4xl mb-6">Wedding Photography</h2>
              <p className="text-lg mb-4">Capturing Your Love Story with Elegance</p>
              <p className="text-lg mb-8">
                Your wedding day is one of the most important moments of your life. My comprehensive wedding 
                photography services ensure that every precious moment is captured with artistry and authenticity.
                From the intimate first look to the joyful celebration, I'll be there to document your unique love story.
              </p>
              <div className="space-y-4 mb-8">
                <div className="flex items-start">
                  <Check className="text-black mr-3 mt-1 flex-shrink-0" size={18} />
                  <p>Interactive before/after editing showcase</p>
                </div>
                <div className="flex items-start">
                  <Check className="text-black mr-3 mt-1 flex-shrink-0" size={18} />
                  <p>Comprehensive client experience timeline</p>
                </div>
                <div className="flex items-start">
                  <Check className="text-black mr-3 mt-1 flex-shrink-0" size={18} />
                  <p>Instant wedding date availability checker</p>
                </div>
                <div className="flex items-start">
                  <Check className="text-black mr-3 mt-1 flex-shrink-0" size={18} />
                  <p>Wedding style quiz to discover your perfect photography style</p>
                </div>
              </div>
              <Link 
                to="/wedding"
                className="inline-flex items-center justify-center gap-2 bg-black text-white px-8 py-3 hover:bg-gray-900 transition-all duration-300 group"
              >
                Explore Wedding Photography
                <ArrowRight className="w-4 h-4 transform group-hover:translate-x-1 transition-transform" />
              </Link>
            </div>
            <div className="order-1 md:order-2 mb-8 md:mb-0">
              <div className="relative">
                <img
                  src="/MoStuff/WeddingGuide.png"
                  alt="Wedding Photography Guide"
                  className="w-full aspect-[4/5] object-cover shadow-xl"
                  data-component-name="LandingPage"
                />
                <div className="absolute top-4 right-4 bg-black text-white text-xs px-3 py-1 rounded-full">FREE GUIDE</div>
                <a 
                  href="/MoStuff/WeddingGuide.pdf" 
                  download
                  className="absolute bottom-4 left-0 right-0 mx-auto w-4/5 bg-black text-white text-center py-3 font-medium hover:bg-gray-800 transition-colors"
                >
                  DOWNLOAD YOUR COPY
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Process Section */}
      <section ref={processRef} className="py-20 relative overflow-hidden">
        {/* Background decorative elements */}
        <div className="absolute -top-20 -right-20 w-96 h-96 rounded-full bg-black/5 blur-3xl"></div>
        <div className="absolute -bottom-20 -left-20 w-96 h-96 rounded-full bg-black/5 blur-3xl"></div>
        
        <div className="container mx-auto px-4 relative z-10">
          <div className="text-center mb-16 transform transition-all duration-1000 ease-out"
               style={{ 
                 opacity: processInView ? 1 : 0, 
                 transform: processInView ? 'translateY(0)' : 'translateY(30px)'
               }}>
            <p className="text-sm uppercase tracking-[0.3em] mb-4 text-black/70 relative inline-block">
              <span className="absolute -left-8 top-1/2 w-6 h-[1px] bg-black/30"></span>
              The Journey
              <span className="absolute -right-8 top-1/2 w-6 h-[1px] bg-black/30"></span>
            </p>
            <h2 className="text-5xl md:text-6xl mb-6 font-serif">
              Your love story deserves to be told 
              <span className="block mt-2 text-black/80">with artistry and grace</span>
            </h2>
          </div>

          <div className="grid md:grid-cols-4 gap-8 md:gap-12">
            {[
              {
                title: "The First Connection",
                description: "Share your dreams and vision over a heartfelt conversation, where your story begins to unfold.",
                icon: "âœ¨"
              },
              {
                title: "Crafting Your Journey",
                description: "Together, we'll design an artful approach to capturing every precious moment of your celebration.",
                icon: "ðŸŽ¨"
              },
              {
                title: "Your Celebration",
                description: "Immerse yourself in the joy while we artfully document each meaningful moment of your love story.",
                icon: "ðŸ“¸"
              },
              {
                title: "Timeless Art",
                description: "Your legacy of love, transformed into an exquisite collection of artful memories to cherish forever.",
                icon: "â™¾ï¸"
              }
            ].map((step, index) => (
              <div 
                key={index}
                className={`text-center relative group cursor-default`}
                style={{ 
                  opacity: processInView ? 1 : 0,
                  transform: processInView ? 'translateY(0)' : 'translateY(40px)',
                  transition: `all 0.9s cubic-bezier(0.22, 1, 0.36, 1) ${index * 150}ms`
                }}
              >
                {/* Connecting line between steps */}
                {index < 3 && (
                  <div className="hidden md:block absolute top-12 left-[calc(100%_-_16px)] w-full h-[1px] bg-black/10 z-0">
                    <div 
                      className="h-full bg-black/30 origin-left" 
                      style={{ 
                        width: processInView ? '100%' : '0%',
                        transition: `width 1.5s ease-out ${(index * 150) + 500}ms`
                      }}
                    />
                  </div>
                )}
                
                {/* Step number with animated circle */}
                <div className="relative inline-flex items-center justify-center mb-6">
                  <div 
                    className="absolute inset-0 rounded-full bg-black/5 transform group-hover:scale-110 transition-all duration-500"
                    style={{ 
                      opacity: processInView ? 1 : 0,
                      transform: `scale(${processInView ? (1) : 0.6})`,
                      transition: `all 0.7s ease-out ${(index * 150) + 300}ms`
                    }}
                  />
                  <p className="text-6xl font-light text-black/20 relative z-10 group-hover:text-black/40 transition-colors duration-500">
                    0{index + 1}
                  </p>
                  <div className="absolute -top-2 -right-2 text-2xl opacity-0 group-hover:opacity-100 transform group-hover:translate-y-0 translate-y-4 transition-all duration-500">
                    {step.icon}
                  </div>
                </div>
                
                <h3 className="text-xl mb-3 font-medium group-hover:text-black transition-colors duration-300">{step.title}</h3>
                <p className="text-gray-600 group-hover:text-gray-800 transition-colors duration-300 max-w-xs mx-auto">
                  {step.description}
                </p>
                
                {/* Subtle hover effect indicator */}
                <div 
                  className="w-10 h-0.5 bg-black/30 mx-auto mt-4 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-center"
                />
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Style Guide Showcase */}
      <section className="py-20 bg-gray-50">
        <div className="container mx-auto px-4">
          <div className="flex flex-col md:flex-row items-center gap-12">
            {/* PDF Preview */}
            <div className="w-full md:w-1/2 relative">
              <div className="aspect-[3/4] bg-white rounded-lg shadow-xl overflow-hidden relative">
                <img 
                  src="/MoStuff/whattowear.png" 
                  alt="What to Wear for Your Engagement Session - Style Guide Cover"
                  className="w-full h-full object-cover"
                  data-component-name="LandingPage"
                />
                <div className="absolute top-4 right-4 bg-black text-white text-xs px-3 py-1 rounded-full">FREE GUIDE</div>
              </div>
            </div>
            
            {/* Content */}
            <div className="w-full md:w-1/2 md:pr-8">
              <h2 className="text-4xl mb-4 font-serif">What to Wear for Your Engagement Session</h2>
              <p className="text-gray-600 mb-6">Looking your best for your engagement photos starts with the perfect wardrobe choices. Our comprehensive style guide helps you select outfits that complement each other, your location, and the season.</p>
              
              <div className="mb-8">
                <h3 className="text-xl mb-4">Inside the guide:</h3>
                <ul className="space-y-3">
                  <li className="flex items-start">
                    <span className="text-black mr-2 mt-1">â€¢</span>
                    <span>Seasonal style tips for any weather condition</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-black mr-2 mt-1">â€¢</span>
                    <span>Color coordination advice for stunning photos</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-black mr-2 mt-1">â€¢</span>
                    <span>Location-specific outfit recommendations</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-black mr-2 mt-1">â€¢</span>
                    <span>Shopping suggestions for every budget</span>
                  </li>
                </ul>
              </div>
              
              <div className="flex flex-col sm:flex-row gap-4">
                <a 
                  href="/MoStuff/whattowear.pdf" 
                  target="_blank"
                  rel="noopener noreferrer"
                  className="inline-flex items-center justify-center gap-2 bg-black text-white px-8 py-3 hover:bg-gray-900 transition-all duration-300 group"
                  data-component-name="LandingPage"
                >
                  Download Free Guide
                  <ArrowRight className="w-4 h-4 transform group-hover:translate-x-1 transition-transform" />
                </a>
                <Link 
                  to="/pricing"
                  className="inline-flex items-center justify-center gap-2 border border-black px-8 py-3 hover:bg-black hover:text-white transition-all duration-300 group"
                >
                  View Pricing
                  <ArrowRight className="w-4 h-4 transform group-hover:translate-x-1 transition-transform" />
                </Link>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Call to Action */}
      <section className="py-20 bg-black text-white text-center">
        <div className="container mx-auto px-4">
          <h2 className="text-5xl mb-6">Only 8 wedding dates remaining for 2025</h2>
          <p className="text-white/80 max-w-2xl mx-auto mb-12">
            Limited dates available for 2025-2026 weddings. Inquire now to secure your date.
          </p>
          <div className="flex flex-col sm:flex-row justify-center gap-4">
            <button 
              onClick={() => setShowBookingModal(true)}
              className="bg-white text-black px-12 py-4 hover:bg-gray-100 transition-all duration-300 group"
            >
              Check Availability
              <ArrowRight className="inline-block ml-2 w-4 h-4 transform group-hover:translate-x-1 transition-transform" />
            </button>
            <Link 
              to="/wedding"
              className="border border-white text-white px-12 py-4 hover:bg-white hover:text-black transition-all duration-300 group"
            >
              Wedding Experience
              <ArrowRight className="inline-block ml-2 w-4 h-4 transform group-hover:translate-x-1 transition-transform" />
            </Link>
          </div>
        </div>
      </section>

      {/* Booking Modal */}
      {showBookingModal && (
        <div className="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50">
          <div className="bg-white rounded-lg p-8 max-w-lg w-full">
            <h2 className="text-2xl font-light mb-6">Check Availability</h2>
            <form className="space-y-6">
              <div className="grid grid-cols-2 gap-4">
                <input
                  type="text"
                  placeholder="First Name*"
                  className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:border-black transition-colors"
                  required
                />
                <input
                  type="text"
                  placeholder="Last Name*"
                  className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:border-black transition-colors"
                  required
                />
              </div>
              <input
                type="email"
                placeholder="Email Address*"
                className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:border-black transition-colors"
                required
              />
              <input
                type="date"
                placeholder="Wedding Date"
                className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:border-black transition-colors"
              />
              <textarea
                placeholder="Tell me about your wedding day"
                className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:border-black transition-colors h-32"
              ></textarea>
              <div className="flex justify-between items-center pt-4">
                <button
                  type="button"
                  onClick={() => setShowBookingModal(false)}
                  className="text-gray-500 hover:text-black transition-colors"
                >
                  Cancel
                </button>
                <button
                  type="submit"
                  className="bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors"
                >
                  Check Availability
                </button>
              </div>
            </form>
          </div>
        </div>
      )}

      <Footer />
    </>
  );
}
